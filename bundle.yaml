machines:
  "1":
    constraints: "mem=2G"
    series: "xenial"
  "2":
    constraints: "mem=2G"
    series: "xenial"
  "3":
    constraints: "mem=2G"
    series: "xenial"
services:
  rack:
    charm: ./trusty/rack
    num_units: 1
    annotations:
      gui-x: "300"
      gui-y: "400"
    to:
      - "1"
  server:
    charm: ./trusty/server
    num_units: 2
    annotations:
      gui-x: "300"
      gui-y: "700"
    to:
      - "2"
  raid:
    charm: ./trusty/raid
    num_units: 2
    annotations:
      gui-x: "300"
      gui-y: "1000"
    to:
      - "2"
  storage:
    charm: ./trusty/storage
    num_units: 2
    annotations:
      gui-x: "600"
      gui-y: "700"
    to:
      - "3"
  mysql:
    charm: "cs:mysql-57"
    options:
    num_units: 1
    annotations:
      gui-x: "600"
      gui-y: "400"
    to:
      - "1"
series: xenial
relations:
  # rack to mysql relation
  - - "rack:database"
    - "mysql:db"
  # rack to server relation
  - - "server:rack"
    - "rack:rack"
  # server to raid relation
  - - "raid:server"
    - "server:raid"
  # server to storage relation
  - - "storage:server"
    - "server:storage"
